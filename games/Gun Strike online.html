<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>GunStrike Online - Bots Edition</title>
    <style>
        body { margin: 0; background: #222; overflow: hidden; font-family: sans-serif; }
        canvas { display: block; background: #333; cursor: crosshair; }
        #ui {
            position: absolute; top: 10px; left: 10px; color: white;
            pointer-events: none; text-shadow: 2px 2px 4px #000;
        }
    </style>
</head>
<body>

<div id="ui">
    <h1>GunStrike Online</h1>
    <p>Kills: <span id="score">0</span> | Vida: <span id="health">100</span></p>
    <small>WASD para mover | Clique para Atirar</small>
</div>

<canvas id="gameCanvas"></canvas>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
const scoreEl = document.getElementById('score');
const healthEl = document.getElementById('health');

canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

let score = 0;
const keys = {};
const bullets = [];
const enemies = [];

// Configurações do Jogador
const player = {
    x: canvas.width / 2,
    y: canvas.height / 2,
    radius: 20,
    color: '#00ff00',
    speed: 4,
    health: 100
};

// Eventos de teclado e mouse
window.addEventListener('keydown', e => keys[e.code] = true);
window.addEventListener('keyup', e => keys[e.code] = false);
window.addEventListener('mousedown', shoot);

function shoot(e) {
    const angle = Math.atan2(e.clientY - player.y, e.clientX - player.x);
    bullets.push({
        x: player.x,
        y: player.y,
        vx: Math.cos(angle) * 10,
        vy: Math.sin(angle) * 10,
        radius: 5,
        color: '#ffff00'
    });
}

// Criar Bots (Inimigos)
function spawnEnemy() {
    const radius = 20;
    let x, y;
    if (Math.random() < 0.5) {
        x = Math.random() < 0.5 ? 0 - radius : canvas.width + radius;
        y = Math.random() * canvas.height;
    } else {
        x = Math.random() * canvas.width;
        y = Math.random() < 0.5 ? 0 - radius : canvas.height + radius;
    }
    enemies.push({ x, y, radius, color: '#ff4444', speed: 1.5 + Math.random() });
}

setInterval(spawnEnemy, 2000); // Nasce um bot a cada 2 segundos

function update() {
    // Movimento do Jogador
    if (keys['KeyW']) player.y -= player.speed;
    if (keys['KeyS']) player.y += player.speed;
    if (keys['KeyA']) player.x -= player.speed;
    if (keys['KeyD']) player.x += player.speed;

    // Atualizar Balas
    bullets.forEach((bullet, bIndex) => {
        bullet.x += bullet.vx;
        bullet.y += bullet.vy;

        // Remover balas fora da tela
        if (bullet.x < 0 || bullet.x > canvas.width || bullet.y < 0 || bullet.y > canvas.height) {
            bullets.splice(bIndex, 1);
        }
    });

    // Atualizar Inimigos (IA Simples: Seguir Jogador)
    enemies.forEach((enemy, eIndex) => {
        const dx = player.x - enemy.x;
        const dy = player.y - enemy.y;
        const dist = Math.sqrt(dx * dx + dy * dy);
        
        enemy.x += (dx / dist) * enemy.speed;
        enemy.y += (dy / dist) * enemy.speed;

        // Colisão Bot com Jogador
        if (dist < player.radius + enemy.radius) {
            player.health -= 0.5;
            healthEl.innerText = Math.floor(player.health);
            if (player.health <= 0) {
                alert("Game Over! Kills: " + score);
                location.reload();
            }
        }

        // Colisão Bala com Bot
        bullets.forEach((bullet, bIndex) => {
            const bDx = bullet.x - enemy.x;
            const bDy = bullet.y - enemy.y;
            const bDist = Math.sqrt(bDx * bDx + bDy * bDy);

            if (bDist < enemy.radius + bullet.radius) {
                enemies.splice(eIndex, 1);
                bullets.splice(bIndex, 1);
                score++;
                scoreEl.innerText = score;
            }
        });
    });
}

function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // Desenhar Jogador
    ctx.beginPath();
    ctx.arc(player.x, player.y, player.radius, 0, Math.PI * 2);
    ctx.fillStyle = player.color;
    ctx.fill();
    ctx.closePath();

    // Desenhar Balas
    bullets.forEach(bullet => {
        ctx.beginPath();
        ctx.arc(bullet.x, bullet.y, bullet.radius, 0, Math.PI * 2);
        ctx.fillStyle = bullet.color;
        ctx.fill();
        ctx.closePath();
    });

    // Desenhar Inimigos
    enemies.forEach(enemy => {
        ctx.beginPath();
        ctx.arc(enemy.x, enemy.y, enemy.radius, 0, Math.PI * 2);
        ctx.fillStyle = enemy.color;
        ctx.fill();
        ctx.closePath();
    });

    update();
    requestAnimationFrame(draw);
}

draw();
</script>
</body>
</html>