<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PatoPlayer Games ü¶Ü</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --bg-color: #f5c000;
            --header-text: #fff;
            --card-bg: #ffffff;
            --primary-btn: #6e3aff;
            --green-banner: #5cb85c;
        }

        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: var(--bg-color); margin: 0; padding: 0; color: white; padding-bottom: 50px; }
        header { text-align: center; padding: 20px; margin-top: 10px; }
        h1 { font-size: 2.5rem; margin: 0; text-shadow: 2px 2px 0px rgba(0,0,0,0.1); display: flex; align-items: center; justify-content: center; gap: 10px; }
        .subtitle { font-size: 1rem; opacity: 0.9; margin-top: 5px; }

        .green-banner { background-color: var(--green-banner); color: white; text-align: center; padding: 15px; margin: 10px 20px; border-radius: 10px; font-weight: 500; box-shadow: 0 4px 0 #4cae4c; }
        
        .chat-link { text-decoration: none; display: block; }
        .chat-banner { background-color: #00b894; max-width: 600px; margin: 20px auto; padding: 12px; border-radius: 30px; text-align: center; color: white; font-weight: bold; box-shadow: 0 4px 0 #008e72; transition: transform 0.2s; }
        .chat-banner:hover { transform: scale(1.02); background-color: #00cea5; }

        .about-btn-container { text-align: center; margin: 15px 0; }
        .btn-about { background: #fd79a8; border: none; padding: 10px 20px; border-radius: 8px; color: white; font-weight: bold; cursor: pointer; box-shadow: 0 4px 0 #e84393; transition: 0.2s; }
        .btn-about:active { transform: translateY(3px); box-shadow: none; }

        .modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.7); overflow-y: auto; }
        .modal-content { background-color: #fff; color: #333; margin: 5% auto; padding: 30px; border-radius: 20px; width: 80%; max-width: 700px; line-height: 1.6; position: relative; }
        .close-modal { position: absolute; right: 20px; top: 15px; font-size: 30px; cursor: pointer; color: #888; }
        .depoimento-gemini { background: #f0f7ff; border-left: 5px solid #6e3aff; padding: 15px; font-style: italic; margin-top: 20px; border-radius: 0 10px 10px 0; }

        .section-title { text-align: center; font-size: 1.5rem; margin: 30px 0 20px; display: flex; align-items: center; justify-content: center; gap: 10px; }
        #game-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 20px; padding: 0 20px; max-width: 1200px; margin: 0 auto; }
        
        .game-card { background: var(--card-bg); border-radius: 15px; padding: 10px; text-align: center; transition: transform 0.2s; box-shadow: 0 4px 10px rgba(0,0,0,0.1); color: #333; display: flex; flex-direction: column; position: relative; }
        .game-card:hover { transform: translateY(-5px); }
        .game-card img { width: 100%; height: 140px; object-fit: cover; border-radius: 10px; background-color: #ddd; }
        .game-card h3 { font-size: 1.1rem; margin: 15px 0 10px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; text-transform: capitalize; }
        .btn-play { background: var(--primary-btn); color: white; text-decoration: none; padding: 10px; border-radius: 8px; display: block; font-weight: bold; font-size: 1rem; margin-top: auto; }
        .btn-play:hover { background: #5a2edb; }
    </style>
</head>
<body>

    <header>
        <h1><i class="fas fa-gamepad"></i> PatoPlayer Games</h1>
        <div class="subtitle">Seus jogos favoritos em um s√≥ lugar</div>
    </header>

    <div class="green-banner">
        <i class="fas fa-gamepad"></i> Seja Bem-vindo! Temos <span id="game-count">0</span> jogos dispon√≠veis pra voc√™!
    </div>

    <div class="about-btn-container">
        <button class="btn-about" onclick="openAbout()"><i class="fas fa-info-circle"></i> Sobre O Site</button>
    </div>

    <div id="aboutModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeAbout()">&times;</span>
            <h2>üìñ Sobre O Site üéÆ</h2>
            <p>Bem-vindo ao <b>Cad√™ A√ß√£o Play!</b> Divers√£o garantida em um s√≥ lugar.</p>
            <p>üë®‚Äçüíª <b>Sobre o Criador:</b> Feito pelo <b>Patinho (Gustavo)</b>. Obrigado por jogar! ü¶Üüíô</p>
            <div class="depoimento-gemini">
                ü§ñ <b>Depoimento do Gemini AI:</b> "Gustavo, essa flexibilidade no c√≥digo √© genial! Agora o site aceita qualquer formato de jogo que voc√™ criar. Continue assim! üåü‚ú®"
            </div>
            <p style="text-align:center; margin-top:20px; font-weight:bold;">Divirta-se! üéâ</p>
        </div>
    </div>

    <a href="https://cadea√ß√£oplay.my.canva.site/whatsapp-online" target="_blank" class="chat-link">
        <div class="chat-banner"><i class="fas fa-comment-dots"></i> Fale com a gente no Chat Online!</div>
    </a>

    <div class="section-title"><i class="fas fa-rocket"></i> Biblioteca de Jogos</div>

    <div id="game-grid">
        <p style="color: black; grid-column: 1/-1; text-align: center;" id="loading">
            <i class="fas fa-spinner fa-spin"></i> Carregando jogos do GitHub...
        </p>
    </div>

<script>
    // --- CONFIGURA√á√ÉO ---
    const USER = 'gustavotedeski2-create';
    const REPO = 'PatoPlayerGamez';
    const FOLDER = 'games'; 

    const API_URL = `https://api.github.com/repos/${USER}/${REPO}/contents/${FOLDER}`;

    // Fun√ß√µes do Modal
    function openAbout() { document.getElementById('aboutModal').style.display = "block"; }
    function closeAbout() { document.getElementById('aboutModal').style.display = "none"; }
    window.onclick = function(e) { if (e.target == document.getElementById('aboutModal')) closeAbout(); }

    async function loadGames() {
        try {
            const response = await fetch(API_URL);
            if (!response.ok) throw new Error('Erro ao conectar no GitHub');
            
            const data = await response.json();
            const grid = document.getElementById('game-grid');
            document.getElementById('loading').style.display = 'none';

            // --- L√ìGICA H√çBRIDA (Aceita Pasta .game OU Arquivo .html) ---
            const games = data.filter(item => {
                const isGameFolder = (item.type === 'dir' && item.name.endsWith('.game'));
                const isHtmlFile = (item.type === 'file' && item.name.endsWith('.html'));
                return isGameFolder || isHtmlFile;
            });

            document.getElementById('game-count').innerText = games.length;

            if (games.length === 0) {
                grid.innerHTML = '<p style="color:black; grid-column:1/-1; text-align:center;">Nenhum jogo encontrado (.html ou .game).</p>';
                return;
            }

            games.forEach(item => {
                let gameDisplayName, thumbUrl, playUrl;
                const baseUrl = `https://${USER}.github.io/${REPO}/${FOLDER}`;

                if (item.type === 'dir') {
                    // --- MODO PASTA (.game) ---
                    // Usa cover.png e index.html de dentro da pasta
                    const rawName = item.name.replace('.game', '');
                    gameDisplayName = rawName.replace(/-/g, ' ');
                    thumbUrl = `${baseUrl}/${item.name}/cover.png`;
                    playUrl = `${baseUrl}/${item.name}/index.html`;

                } else {
                    // --- MODO ARQUIVO (.html) ---
                    // Usa o arquivo direto e uma imagem placeholder
                    const rawName = item.name.replace('.html', '');
                    gameDisplayName = rawName.replace(/-/g, ' ');
                    thumbUrl = `https://via.placeholder.com/300x200/6e3aff/ffffff?text=${gameDisplayName}`;
                    playUrl = `${baseUrl}/${item.name}`;
                }

                const card = document.createElement('div');
                card.className = 'game-card';
                
                // O 'onerror' garante que se a capa n√£o existir na pasta, mostra o placeholder
                card.innerHTML = `
                    <img src="${thumbUrl}" 
                         onerror="this.src='https://via.placeholder.com/300x200/6e3aff/ffffff?text=${gameDisplayName}'" 
                         alt="${gameDisplayName}">
                    <h3>${gameDisplayName}</h3>
                    <a href="${playUrl}" class="btn-play">JOGAR</a>
                `;
                grid.appendChild(card);
            });

        } catch (error) {
            console.error(error);
            document.getElementById('loading').innerHTML = `Erro: ${error.message}`;
        }
    }

    loadGames();
</script>

</body>
</html>
